<!doctype html>
<html>
<head>
<style type="text/css">
*{padding:0;margin:0;overflow:hidden;}
</style>
</head>
<body>
<div style="width:70%;height:600px;float:left;"><canvas id="can" width="600" height="600" style="display: block;background:black;margin:0 auto;"></canvas></div>
<div style="width:30%;height:630px;float:left">
<div style="width:100%;height:150px;"></div>
<div style="width:100%;height:100px;padding:0 27px;"><button id="you" style="border-radius:12px;font-size:17px;width:100px;height:30px;border:0;background-color:#00FFFF;">开始</button></div>
<div style="width:100%;height:50px;padding:0 50px;"><button onclick="move(1)" style="border-radius:12px;font-size:27px;width:50px;height:50px;border:0;background-color:#00FFFF;">↑</button></div>
<div style="width:100%;height:50px;">
<button onclick="move(0)" style="border-radius:12px;font-size:27px;width:50px;height:50px;border:0;background-color:#00FFFF;float:left;">←</button>
<button onclick="move(3)" style="border-radius:12px;font-size:27px;width:50px;height:50px;border:0;background-color:#00FFFF;float:left;">↓</button>
<button onclick="move(2)" style="border-radius:12px;font-size:27px;width:50px;height:50px;border:0;background-color:#00FFFF;float:left;">→</button>
</div>
<p style="display:block;margin-top:60px;font-size:25px;">按键或者点击上图按钮来操作游戏</p>
</div>
<script>
    var ssss=1;
    var aini=document.getElementById("you");
	aini.addEventListener("click",jjj,false);
	function jjj(){
	    if(ssss==1){
		 start1();
		 aini.innerHTML="暂停";
		}else if(ssss==2){
		stop();
		aini.innerHTML="开始";
		}else{
		 aini.innerHTML="结束";
		}
	};
    var sn=[42,41],
	dz=43,
	fx=1,
	n,
	ctx=document.getElementById("can").getContext("2d");
    function draw(t,c){
        ctx.fillStyle=c;
        ctx.fillRect(t%30*20+1,~~(t/30)*20+1,18,18);
    }
	function move(dd)
	{
	fx=sn[1]-sn[0]==(n=[-1,-30,1,30][dd]||fx)?fx:n;
	};
    document.onkeydown=function(e)
	{
	fx=sn[1]-sn[0]==(n=[-1,-30,1,30][(e||event).keyCode-37]||fx)?fx:n;
	};
    function start(){
        sn.unshift(n=sn[0]+fx);
        if(sn.indexOf(n,1)>0 || n<0||n>899||fx==1&&n%30==0||fx==-1&&n%30==29) {clearInterval(run);ssss=3;return alert("GAME OVER");}
        draw(n,"Lime");
        if(n==dz){
            while(sn.indexOf(dz=~~(Math.random()*900))>=0);
            draw(dz,"Yellow");
        }else
            draw(sn.pop(),"Black");
    };
	function start1(){
	    ssss=2;
		run=setInterval("start()",130);
	};
    function stop(){
	    ssss=1;
	    clearInterval(run);
	};
</script>
</body>
</html>